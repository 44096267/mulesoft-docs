= Designing Your API
:keywords: api, designer, console, raml, apikit

*API Designer* is an environment for designing and writing a API in link:http://raml.org[RESTful API Modeling Language (RAML)]. API Designer supports RAML 1.0. 

The API definition that you create in API Designer can be consumed by link:/anypoint-platform-for-apis/building-your-api[APIkit] and other RAML interpreting frameworks such as Osprey and JAXRS-Codegen.

Using API Console, located to the left of API Designer, and the Mocking Service on the top, right-hand side, you can simulate calls to the API. API Designer also provides the following RAML editor functions:

* Checks and highlights syntax
* Provides instant feedback, flagging incorrect syntax
* Displays a shelf of clickable hints for inserting the next line of code

image:APIdesignerAreas.png[APIdesignerAreas]

== Accessing API Designer

You can access API Designer in the following ways:

* From Anypoint Platform, using the procedure in the next section
+
You need an Anypoint Platform for APIs account. If you already have an account, you need to have API Creator permissions to create an API definition in API Designer. If you don't already have an account, link:https://anypoint.mulesoft.com/accounts/#/signup[sign up].
+
* Download API Designer from link:https://github.com/mulesoft/api-designer[Github] and follow instructions about how to run it as a standalone process in your local machine or embed it into another application.

== Creating a RAML 1.0 API in API Designer

RAML 1.0 includes a number of enhancements:

* Data types
+
A efficient way to model data that uses simplified YAML-based, map syntax and can include examples and annotations
+
* Examples
+
Named examples of instances of a type that documentation generators can use to provide sample values
+
* Annotations
+
Metadata you can add to extend the API beyond the RAML 1.0 specification or to enhance built-in RAML properties
+
* Improved library, overlay, and extension capabilities
+
More modular than in the previous version
+
* Better security schemes
+
Complete OAuth, key-based security schemes and extension points.




==== Step 1 – The Root

. Make sure the first line begins with the correct version *RAML 1.0*.
+
[source,yaml]
----
#%RAML 1.0
----
+
. Look at the Shelf at the bottom of the Designer. The Shelf is context aware, thus it always displays a list of the elements you're able to enter at the location of your cursor. These elements are arranged into categories: Root, Parameters, Security, Resources, Traits and Types.
+
image:suggestions.png[Shelf suggestions]

. When you invoke API Designer from the API version page in Anypoint Platform, the Designer fills in the title and version properties that you already specified. These elements reside in the root category: they contain information that applies to the rest of your API definition.
+

[source,yaml,linenums]
----
#%RAML 1.0
title: My first API
version: v0.1
----
+
. Click the shelf to enter the *baseUri*, and update the provided template with your API's URI, required for a valid RAML definition.
. Security schemes belong in the root category, also. Add the *securedBy* property to set the default security schemes for and protect every method of every resource in the API.
. Click the shelf to enter the *baseUri*, and update the provided template with your API's URI, required for a valid RAML definition.
+

[source,yaml,linenums]
----
#%RAML 0.8
title: My first API
version: v0.1
baseUri: https://api.iheartthem.com/{version}
mediaType: application/json
----

Traits and resource types are also entered at the root of the API definition since they are repeatedly referenced throughout your API. RAML leverages the patterns in your API: can you think of any to enter right now? Remember, you can always return to the root of your API when you have a few resources and methods sorted out. In fact, we strongly recommend that you write your API and discover patterns as they emerge, rather than trying to predict behavior. Refactoring your API into reusable elements like this avoids wasting efforts in over-engeneering and helps keep your API consistent and concise. 

==== Step 2 – Resources

. Add a new resource. Click *New Resource* directly from the Shelf, two lines get added into your RAML API definition: the resource itself and the attribute display-name, used by the interactive documentation in the Console. 
. Customize the name of the resource: change `/newResource` into `/user`.
Hit enter to add an indented new line below this title, then hit tab to add an indent. Notice that when you place the cursor on this new line the editor recognizes that you are at a different level in the API definition hierarchy and have different needs. The Shelf changes to reflect your new options: Methods, Parameters, Security, Resources, Traits and Types now match the needs of this hierarchical level.
. Add a a first attribute in this new line: `displayName`. Replace the default value for `displayName: User`
Place the cursor at the end of the displayName line and hit enter. The Designer keeps the next line indented automatically to continue adding elements hierarchically below the resource.

image:RAML_header.png[RAML_header]

[source,yaml,linenums]
----
#%RAML 0.8
title: My first API
version: v0.1
baseUri: https://api.iheartthem.com/{version}
mediaType: application/json
/Users:
  displayName: Users
----

==== Step 3 – Methods

. Now add methods and parameters to your API at this level. Note that when you add a `queryParameters` element and indent on the next line to add a parameter, the suggestions on the Shelf disappear as the editor cannot predict what parameters you need. 
. After you've named a `queryParameter`, then moved on to the next line and indented appropriately, the shelf reappears with new options: *Docs* and *Parameters*. 

image:API+Designer+shelf.png[API+Designer+shelf]

Click the characteristics you require to enter them.

[source,yaml,linenums]
----
#%RAML 0.8
title: My first API
version: v0.1
baseUri: https://api.iheartthem.com/{version}
mediaType: application/json
/Users:
  displayName: Users
  get:
    description: Get a list of users
    queryParameters:
      firstName:
        type: string
        required: false
      lastName:
        type: string
        required: true
      userId:
        type: integer
        required: true
----

== Tips

If you previously defined a security scheme at the root, use **securedBy: **and name the scheme the resource requires in an array. Similarly, to reference a trait you previously described in the root use **is:**, and to reference a resource type use *type:*

To keep your API definition as concise as possible for your consumers, use the ** `!include`** property to host documentation, schemas, and often-used patterns outside the definition itself. The Designer's parser interprets **`!include`** as if the content of the externally-hosted file were declared in-line.

When entering long form documentation, such as an authentication process, the designer accepts standard Markdown syntax.

== Simulating Calls to the API

You can simulate calling the API in the API console. 

. Above the API console on the right, turn on the *Mocking Service*.
. In your RAML definition the `baseUri` that was a placeholder for the duration of the design phase is now an actual URI:

image:API+designer+mocking.png[API+designer+mocking]

If you provided example responses in the RAML definition, you can issie calls in the API Console or your browser to return the example data. 

You can now link://anypoint-platform-for-apis/walkthrough-engage#including-an-api-console[share your API Console in the API Portal].

== See Also

* link:http://training.mulesoft.com[MuleSoft Training]
* link:https://www.mulesoft.com/webinars[MuleSoft Webinars]
* link:http://blogs.mulesoft.com[MuleSoft Blogs]
* link:http://forums.mulesoft.com[MuleSoft's Forums]
* link:https://www.mulesoft.com/support-and-services/mule-esb-support-license-subscription[MuleSoft Support]
* mailto:support@mulesoft.com[Contact MuleSoft]

