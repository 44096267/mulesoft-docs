= Designing Your API
:keywords: api, designer, console, raml, apikit

*API Designer* is an environment for designing and writing a API in link:http://raml.org[RESTful API Modeling Language (RAML)]. API Designer supports RAML 1.0. APIs that you create in API Designer can be consumed by link:/anypoint-platform-for-apis/building-your-api[APIkit] and other RAML interpreting frameworks such as Osprey and JAXRS-Codegen.

image:APIdesignerAreas.png[APIdesignerAreas]

== RAML 1.0 Enhancements

RAML 1.0 includes a number of enhancements. The following list includes just a few of the new capabilities:

* Data types
+
A efficient way to model data that uses simplified YAML-based, map syntax and can include examples and annotations
+
* Examples
+
Named examples of instances of a type that documentation generators can use to provide sample values
+
* Annotations
+
Metadata you can add to extend the API beyond the RAML 1.0 specification or to enhance built-in RAML properties
+
* Improved library, overlay, and extension capabilities
+
More modular than in the previous version
+
* Better security schemes
+
Complete OAuth, key-based security schemes and extension points.

== Prerequisites

To create an API in Anypoint Platform, you need the following things:

* An Anypoint Platform account
+
If you do not have an account, link:https://anypoint.mulesoft.com/login/#/signin[sign up now].
* API Creator or Organization Administrator link:/anypoint-platform-for-apis/managing-users-and-roles-in-the-anypoint-platform#understanding-roles[role membership]
+
If you are not a member of one of these roles, you cannot see the *Add new API* button that you use to access the API Designer.

== Accessing API Designer

You can access API Designer in the following ways:

* From Anypoint Platform, using the procedure in the next section
+
You need an Anypoint Platform for APIs account. If you already have an account, you need to have API Creator permissions to create an API definition in API Designer. If you don't already have an account, link:https://anypoint.mulesoft.com/accounts/#/signup[sign up].
+
* Download API Designer from link:https://github.com/mulesoft/api-designer[Github] and follow instructions about how to run it as a standalone process in your local machine or embed it into another application.

=== Access API Designer from Anypoint Platform

After signing in to Anypoint Platform, follow these steps to access API Designer:

. Click *API Manager*.
+
The *API administration* page appears, listing the names of APIs, if there are any, that you are authorized to see.
+
. Click *Add new API*.
+
The Add API dialog appears.
. Enter the following required information:
+
* *API name*: placeholder
* *Version name*: 1.0.development
+
. Click *Add*.
+
The API version page appears. 
. In *API Definition*, click the *Define API in API Designer* link.
+
image:API+designer+link.png[API+designer+link]
+
The Designer, which consists of the following panels, appears. 

* Files panel (on the left)
* The RAML editor panel (in the middle)
* The link:[API Console] (on the right)

The files panel shows the only file currently associated with the API, the one you are creating, named `api.raml` by default. Any other files, such as schemas, that you import to include in the API appear in this list. 

The RAML editor panel contains the beginnings of an API definition, the title and version number, generated from the Anypoint Platform dialog you filled in. The RAML editor functions include:

* Checks and highlights syntax
* Provides instant feedback, flagging incorrect syntax
* Displays a shelf of clickable hints for inserting the next line of code

The Shelf at the bottom of the Designer is context aware. It displays a list of the elements you're able to enter at the location of your cursor. These elements are arranged into categories: Root, Docs, Parameters, Security, Resources, Traits and Types, and Schemas.
+
image:suggestions.png[Shelf suggestions]

The API Console panel is located to the right of API Designer. Using the API Console and turning on the Mocking Service on the top, right-hand side, you can simulate calls to the API. 

image:API+designer3.8.png[API+designer3.8]

== Creating a RAML 1.0 API in API Designer

The example in this section connects to a free online REST service, link:http://jsonplaceholder.typicode.com[JSONPlaceholder].  Resources are:

 * All user information
 * User names only

The JSONPlaceholder service serves up user information in JSON. The RESTful API interface navigates the JSON resource, provides all user information, or partial (names-only) user information to callers.

To create a RAML 1.0 API:

. Change the RAML version to *RAML 1.0*. Required.
. On line 4, at the root level enter a *baseUri* 
+
The baseUri serves as an identifier for the API and forms the base of the URLs of the resources. 
+
. Add a security scheme at the root level. Add Basic Authentication security to the API to require a user name and password.
+

. 
+

[source,yaml,linenums]
----
#%RAML 1.0
title: My first API
version: v0.1
----
+
. Click the shelf to enter an optional *baseUri*.
. Click the shelf to enter the *baseUri*, and update the provided template with your API's URI, required for a valid RAML definition.
. Security schemes belong in the root category. Add Basic Authentication security to the API to require a user name and password.
+

[source,yaml,linenums]
----
#%RAML 1.0
title: My first API
version: v0.1
baseUri: https://api.iheartthem.com/{version}
securitySchemes:
  basic:
    description: |
      This API supports Basic Authentication.
    type: Basic Authentication
----

Traits and resource types are also entered at the root of the API definition since they are repeatedly referenced throughout your API. RAML leverages the patterns in your API: can you think of any to enter right now? Remember, you can always return to the root of your API when you have a few resources and methods sorted out. In fact, we strongly recommend that you write your API and discover patterns as they emerge, rather than trying to predict behavior. Refactoring your API into reusable elements like this avoids wasting efforts in over-engeneering and helps keep your API consistent and concise. 

==== Step 2 – Resources

. Add a new resource. Click *New Resource* directly from the Shelf, two lines get added into your RAML API definition: the resource itself and the attribute display-name, used by the interactive documentation in the Console. 
. Customize the name of the resource: change `/newResource` into `/user`.
Hit enter to add an indented new line below this title, then hit tab to add an indent. Notice that when you place the cursor on this new line the editor recognizes that you are at a different level in the API definition hierarchy and have different needs. The Shelf changes to reflect your new options: Methods, Parameters, Security, Resources, Traits and Types now match the needs of this hierarchical level.
. Add a a first attribute in this new line: `displayName`. Replace the default value for `displayName: User`
Place the cursor at the end of the displayName line and hit enter. The Designer keeps the next line indented automatically to continue adding elements hierarchically below the resource.

image:RAML_header.png[RAML_header]

[source,yaml,linenums]
----
#%RAML 0.8
title: My first API
version: v0.1
baseUri: https://api.iheartthem.com/{version}
mediaType: application/json
/Users:
  displayName: Users
----

==== Step 3 – Methods

. Now add methods and parameters to your API at this level. Note that when you add a `queryParameters` element and indent on the next line to add a parameter, the suggestions on the Shelf disappear as the editor cannot predict what parameters you need. 
. After you've named a `queryParameter`, then moved on to the next line and indented appropriately, the shelf reappears with new options: *Docs* and *Parameters*. 

image:API+Designer+shelf.png[API+Designer+shelf]

Click the characteristics you require to enter them.

[source,yaml,linenums]
----
#%RAML 0.8
title: My first API
version: v0.1
baseUri: https://api.iheartthem.com/{version}
mediaType: application/json
/Users:
  displayName: Users
  get:
    description: Get a list of users
    queryParameters:
      firstName:
        type: string
        required: false
      lastName:
        type: string
        required: true
      userId:
        type: integer
        required: true
----

== Tips

If you previously defined a security scheme at the root, use **securedBy: **and name the scheme the resource requires in an array. Similarly, to reference a trait you previously described in the root use **is:**, and to reference a resource type use *type:*

To keep your API definition as concise as possible for your consumers, use the ** `!include`** property to host documentation, schemas, and often-used patterns outside the definition itself. The Designer's parser interprets **`!include`** as if the content of the externally-hosted file were declared in-line.

When entering long form documentation, such as an authentication process, the designer accepts standard Markdown syntax.

== Simulating Calls to the API

You can simulate calling the API in the API console. 

. Above the API console on the right, turn on the *Mocking Service*.
. In your RAML definition the `baseUri` that was a placeholder for the duration of the design phase is now an actual URI:

image:API+designer+mocking.png[API+designer+mocking]

If you provided example responses in the RAML definition, you can issie calls in the API Console or your browser to return the example data. 

You can now link://anypoint-platform-for-apis/walkthrough-engage#including-an-api-console[share your API Console in the API Portal].

== See Also

* link:http://training.mulesoft.com[MuleSoft Training]
* link:https://www.mulesoft.com/webinars[MuleSoft Webinars]
* link:http://blogs.mulesoft.com[MuleSoft Blogs]
* link:http://forums.mulesoft.com[MuleSoft's Forums]
* link:https://www.mulesoft.com/support-and-services/mule-esb-support-license-subscription[MuleSoft Support]
* mailto:support@mulesoft.com[Contact MuleSoft]

