= ServiceNow Connector 6.0
:keywords: anypoint studio, connector, endpoint, servicenow, http
:imagesdir: ./_images

The ServiceNow Connector facilitates connections between Mule integration and ServiceNow applications. The ServiceNow Connector v6 provides these operations: aggregate, deleteMultiple, deleteRecord, get, getKeys, getRecords, insert, insertMultiple, and update. You can use these operations with the custom ServiceNow tables, along with any operations available through the installed plugins.

== Prerequisites

This document assumes that you are familiar with Mule, Anypoint connectors, Anypoint Studio, Mule flows, and global elements.

To use this connector, you should have:

* A ServiceNow account.
* (optional) Anypoint Studio. If you are upgrading from a previous version of the connector, a small popup appears in the bottom right corner of Anypoint Studio with the "Updates Available" message. Click the popup and follow the prompts to install the latest version. You can also use this connector in Design Center in Anypoint Platform, and as a standalone application developed in XML.

See: 

* link:/mule-user-guide/v/3.8/hardware-and-software-requirements[Hardware and Software Requirements]
* link:/release-notes/servicenow-connector-release-notes[ServiceNow Connector Release Notes]
* link:/anypoint-exchange/ex2-studio[Install the connector in Anypoint Studio]
* link:http://mulesoft.github.io/servicenow-connector/[Technical Reference]

== Design Center: To Use the ServiceNow Connector

. Log into Anypoint Platform.
. Click Design Center and click *+ Create*. Specify the project name, type, and environment name.
. Choose a trigger such as an HTTP Listener or Scheduler. Configure the trigger as needed.
. Click the plus sign to add a component.
. Click NetSuite from the Component list.
. Click an operation and add field information. See link:/connectors/servicenow-reference#nsops[ServiceNow Connector Operations] for operations and field descriptions.
. Test the connection. 

[[configure]]
== Anypoint Studio: To Configure This Connector

Place the connector in your flow as applicable for your use case.

To use the ServiceNow connector in your Mule application, you must configure a global ServiceNow element that can be used by the ServiceNow connector (read more about  link:/mule-user-guide/v/4.0/global-elements[Global Elements]). The ServiceNow connector provides the following global configuration(s), requiring the following information:

[%header%autowidth.spread]
|===
|Field |Description
|*Username* |Enter the username to log in with.
|*Password* |Enter the corresponding password.
|*Service address* | WSDL endpoint
|*Service Now version* | ServiceNow version (Instabul default)
|*User tables*| Custom tables for logged user.
|===

image:servicenow-global-element-props.png[servicenow-config]

For authenticate against ServiceNow endpoint, you have to define an HTTP Requester with BASIC Auth credentials.

[[operations]]
== Operations

* Aggregate
* Insert
* Insert multiple
* Delete record
* Delete multiple
* Update
* Get
* Get keys
* Get records

See a full list of operations for any version of the connector at the link:http://wiki.servicenow.com/index.php?title=SOAP_Web_Service[ServiceNow SOAP site].


== XML and Standalone: To Configure This Connector

The XML element for the ServiceNow configuration starts with the `servicenow` statement.

[[ns-schema]]
== Connector Namespace and Schema

When designing your application in Anypoint Studio, when you drag the connector from the palette onto the Anypoint Studio canvas, Studio automatically populates the XML code with the connector *namespace* and *schema location*.

*Namespace:* `+http://www.mulesoft.org/schema/mule/servicenow+` +
*Schema Location:* `+http://www.mulesoft.org/schema/mule/servicenow/current/mule-servicenow.xsd+`

If you are manually coding the Mule application in Studio's XML editor or another text editor, define the namespace and schema location in the header of your *Configuration XML*, inside the `<mule>` tag.

[source, xml,linenums]
----
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:connector="http://www.mulesoft.org/schema/mule/servicenow"
      xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core
               http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/servicenow
               http://www.mulesoft.org/schema/mule/servicenow/current/mule-servicenow.xsd">

      <!-- put your global configuration elements and flows here -->

</mule>
----

*Note:* Use `current` in the schema path. Studio interprets this to the current Mule version.

[[maven]]
== Maven Dependency Information

For Maven dependency management, include this XML snippet in your `pom.xml` file.

[source,xml,linenums]
----
<dependency>
  <groupId>org.mule.modules</groupId>
  <artifactId>mule-module-servicenow</artifactId>
  <version>6.0.0</version>
</dependency>
----


Inside the `<version>` tags, put the desired version number, the word `RELEASE` for the latest release, or `SNAPSHOT` for the latest available version.

== Common Use Cases

* link:#use-case-1[Get ServiceNow Incident Table Keys]
* link:#use-case-2[Get Records from ServiceNow Incident Table]

[use-case-1]
=== Get ServiceNow Incident Table Keys
Create a Mule flow to get keys from the Incident table in your ServiceNow instance.

. Create a Mule project in your Anypoint Studio and drag a HTTP connector into the canvas, then select it to open the properties editor console.
+
.The HTTP Request configuration sets properties for the HTTP connection: socket properties, proxy settings, and authentication. This simple configuration assumes a default HTTP request configuration. If a different authentication strategy is employed, it can be configured within the advanced configuration of the connector.
+
. Add a new HTTP Listener Configuration global element:
.. In *Connector Configuration*, click the green plus button (*+*).
.. Accept the default parameters: port 8081 and host 0.0.0.0.
.. In the HTTP connector properties, set the path to the `/incident/get` value.
. Configure a new HTTP Requester with BASIC Auth (use the ServiceNow environment credentials)
. Add a Set Payload transformer after the HTTP Requester, and set the value to:
+
[source,code]
#[['description': 'Get Keys Demo']]
+
. Search for `servicenow` and drag the ServiceNow connector after the Set Payload block.
. Configure the ServiceNow connector global element with its environment values.
. Click Validate Config to confirm that Mule can connect with your ServiceNow instance. If the connection is successful, click OK to save the configurations of the global element. If unsuccessful, revise or correct any incorrect parameters, and test again.
+
. In the properties editor of the ServiceNow connector, set the Table to `incident` and the Operation to `getKeys`:
+
image:servicenow-getkeys-config.png[servicenow-getkeys-config]
+
. Search for `Dataweave` and drag the Transform Message building block between the Set Payload transformer and the ServiceNow connector, and configure it for transform the XML message
+
. Add an XML to JSON transformer.
. Save and run the project as a Mule Application.
. To test the app, navigate to `+http://localhost:8081/incident/get+`

[use-case-2]
=== Get Records from ServiceNow Incident Table
Create a Mule flow to get records from the Incident table.

. Create a Mule project in your Anypoint Studio and drag a HTTP connector into the canvas with default values.
. In the HTTP connector properties view, configure the following HTTP path as `getrecords`.
. Configure a new HTTP Requester with BASIC Auth (use the ServiceNow environment crendentials)
. Add a Set Payload transformer after the HTTP connector, and configure the value field to
+
[source,code]
#[['description': 'Get Records Demo']]
+
. Search for `servicenow` and drag the ServiceNow connector after the Set Payload block.
. Configure connector parameters and create a ServiceNow global element for it.
+
. Click Validate Config to confirm that Mule can connect with your ServiceNow instance. If the connection is successful, click OK to save the configurations of the global element. If unsuccessful, revise or correct any incorrect parameters, then test again.
+
. In the properties editor of the ServiceNow connector, set Table to `incident` and Operation to `getRecords`.
+
image:servicenow-getRecords-config.png[servicenow-getRecords-config]
+
. Drag a `Dataweave` element between the Set Payload transformer and the ServiceNow connector, and configure it for transform the XML message.
+
. Add a Logger component and an XML to JSON transformer after the ServiceNow connector.
. Save and Run as Mule Application.
. To test the app, navigate to `+http://localhost:8081/incident/getrecords+`

== Connector Performance

To define the pooling profile for the connector manually, access the *Pooling Profile* tab in the applicable global element for the connector.

For background information on pooling, see link:/mule-user-guide/v/4.0/tuning-performance[Tuning Performance].


== Resources

* Access the link:/release-notes/servicenow-connector-release-notes[ServiceNow Connector Release Notes].