= To Filter Data Using an Input Parameter (Design Center)

A frequently performed tasks involving the Select operation is to filter data to return only the rows that match a search criteria. In this procedure, you use the WHERE clause in conjunction with the SELECT statement. In the WHERE clause you use the following syntax to define the search criteria:

`:param-name`

Use DataWeave to provide the type-checked values. For example: param-name = `attributes.queryParams.pcode`

In this procedure, you query the database for product information filtering the data by product code. You can use a query parameter or a URI parameter to filter the data. To avoid SQL injections, use the colon syntax for defining an input parameter described in this procedure. Do _not_ use expressions directly to define an input parameter. This procedure builds on the example that connects a Mule app to a database using the Classic Models sample database. 

. Create a new project. In the new flow, add an HTTP Listener operation.
. In a Listener configuration, accept an existing configuration or add one as follows:
+
* Protocol: Select HTTP.
* Host: *0.0.0.0*
* Port: 8081
+
. In General, set Path to the path of the HTTP URL. For example, set Path to `/`.
. In Allowed Methods, type POST.
. Accept the other default Listener settings and close the configuration.
. Assuming you have connected a database to the flow for a Select operation, set up the query:
* In Database - Select, in General, enter SQL query text, omitting the semicolon. In the WHERE clause, use a colon followed by the key to represent the query input parameter for example:
+
`SELECT * FROM products p WHERE p.productCode = :pcode`
+
* In Input Parameter, click Add, and type pcode for the key.
* In Value, delete the quotation marks, and pause for hints.
* Select `attributes`. Type period and select `queryParams`.
* Type `pcode`:
+
`attributes.queryParams.pcode`
+
image:filter-query.png[SELECT * FROM products p WHERE p.productCode = :pcode]
. Close the configuration, deploy the app, copy the link, and run the app:
* In a client such as Postman, paste the link.
* Select the POST method. 
* Add the query parameter to the URL.
+ 
`http://...cloudhub.io/?pcode=S10_1678/`
+
. After sending the URL in Postman, open the database operation and select Live > Output.
+
The results of the filtered query appear in JSON format:
+
----
[
  {
    "buyPrice": 48.81,
    "productScale": "1:10" "S"
    "productCode": "S10_1678"
    ...
  }
]
----

== See Also

* link:/connectors/http-trigger-app-from-browser[To Start an App from a Browser]
* link:/connectors/db-connect-database-task[To Connect a Database]
* link:/connectors/db-connector-parametrized-query-ref[Parametrized Query Reference]
* link:http://www.mysqltutorial.org/download/2[Classic Models database download]