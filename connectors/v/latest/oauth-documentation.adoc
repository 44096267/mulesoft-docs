:toc:               left
:toc-title:         OAuth Module
:toclevels:         2
:last-update-label!:
:docinfo:
:source-highlighter: coderay
:icons: font


= OAuth Module Documentation Reference

+++
An extension to hook oauth2 to http extension connectors.
+++


== Configurations
---
[[config]]
=== Config

+++
Default configuration
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | *x*{nbsp}
|======================





== Operations

[[invalidateOauthContext]]
=== Invalidate Oauth Context
`<http://www.mulesoft.org/schema/mule/oauth:invalidate-oauth-context>`

+++
Clears the oauth context for a token manager and a resource owner id.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Token Manager a| <<token-manager-config>> |  +++The token manager which holds the credentials to invalidate.+++ |  | *x*{nbsp}
| Resource Owner Id a| String |  +++The resource owner id to invalidate. This attribute is only allowed for authorization code grant type.+++ |  +++default+++ | {nbsp}
|======================





[[retrieveAccessToken]]
=== Retrieve Access Token
`<http://www.mulesoft.org/schema/mule/oauth:retrieve-access-token>`

+++
Returns the access token of the token manager for the parametrized resource owner ID
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Token Manager a| <<token-manager-config>> |  +++The token manager which holds the access token.+++ |  | *x*{nbsp}
| Resource Owner Id a| String |  +++The resource owner id to invalidate. This attribute is only allowed for authorization code grant type.+++ |  +++default+++ | {nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================




[[retrieveCustomTokenResponseParam]]
=== Retrieve Custom Token Response Param
`<http://www.mulesoft.org/schema/mule/oauth:retrieve-custom-token-response-param>`

+++
Returns the value of the parameter that was extracted during the dance from the token manager for the parametrized resource owner ID
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Token Manager a| <<token-manager-config>> |  +++The token manager which holds the access token.+++ |  | *x*{nbsp}
| Resource Owner Id a| String |  +++The resource owner id to invalidate. This attribute is only allowed for authorization code grant type.+++ |  +++default+++ | {nbsp}
| Key a| String |  +++to look for in the elements that has been extracted after the previous OAuth dance.+++ |  | *x*{nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| Any
|======================




[[retrieveExpiresIn]]
=== Retrieve Expires In
`<http://www.mulesoft.org/schema/mule/oauth:retrieve-expires-in>`

+++
Returns the expiration of the oauth context for the parametrized resource owner ID
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Token Manager a| <<token-manager-config>> |  +++The token manager which holds the access token.+++ |  | *x*{nbsp}
| Resource Owner Id a| String |  +++The resource owner id to invalidate. This attribute is only allowed for authorization code grant type.+++ |  +++default+++ | {nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================




[[retrieveRefreshToken]]
=== Retrieve Refresh Token
`<http://www.mulesoft.org/schema/mule/oauth:retrieve-refresh-token>`

+++
Returns the refresh token of the oauth context for the parametrized resource owner ID
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Token Manager a| <<token-manager-config>> |  +++The token manager which holds the refresh token.+++ |  | *x*{nbsp}
| Resource Owner Id a| String |  +++The resource owner id to invalidate. This attribute is only allowed for authorization code grant type.+++ |  +++default+++ | {nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================




[[retrieveState]]
=== Retrieve State
`<http://www.mulesoft.org/schema/mule/oauth:retrieve-state>`

+++
Returns the state of the oauth context for the parametrized resource owner ID
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Token Manager a| <<token-manager-config>> |  +++The token manager which holds the access token.+++ |  | *x*{nbsp}
| Resource Owner Id a| String |  +++The resource owner id to invalidate. This attribute is only allowed for authorization code grant type.+++ |  +++default+++ | {nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================





== Types
[[token-manager-config]]
=== Token Manager Config

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Object Store a| <<ObjectStore>> | 
|======================

[[authorization-code-grant-type]]
=== Authorization Code Grant Type

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Local Callback Config a| String | 
| Local Callback Config Path a| String | 
| Local Callback Url a| String | 
| External Callback Url a| String | 
| State a| String | 
| Local Authorization Url Resource Owner Id a| String | 
| Local Authorization Url a| String | 
| Authorization Url a| String | 
| Custom Parameters a| Object | 
| Resource Owner Id a| String | default
| Client Id a| String | 
| Client Secret a| String | 
| Scopes a| String | 
| Token Manager a| <<token-manager-config>> | 
| Token Url a| String | 
| Response Access Token a| String | #[payload.access_token]
| Response Refresh Token a| String | #[payload.refresh_token]
| Response Expires In a| String | #[payload.expires_in]
| Custom Parameter Extractors a| Array of <<ParameterExtractor>> | 
| Refresh Token When a| Boolean | #[attributes.statusCode == 401 or attributes.statusCode == 403]
| Tls Context Factory a| <<Tls>> | 
|======================

[[ParameterExtractor]]
=== Parameter Extractor

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Param Name a| String | 
| Value a| String | 
|======================

[[Tls]]
=== Tls

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Enabled Protocols a| String | 
| Enabled Cipher Suites a| String | 
| Trust Store a| <<TrustStore>> | 
| Key Store a| <<KeyStore>> | 
|======================

[[TrustStore]]
=== Trust Store

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Path a| String | 
| Password a| String | 
| Type a| String | 
| Algorithm a| String | 
| Insecure a| Boolean | 
|======================

[[KeyStore]]
=== Key Store

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Path a| String | 
| Type a| String | 
| Alias a| String | 
| Key Password a| String | 
| Password a| String | 
| Algorithm a| String | 
|======================

[[ClientCredentialsGrantType]]
=== Client Credentials Grant Type

[cols=".^30%,.^40%,.^30%", options="header"]
|======================
| Field | Type | Default Value
| Encode Client Credentials In Body a| Boolean | false
| Client Id a| String | 
| Client Secret a| String | 
| Scopes a| String | 
| Token Manager a| <<token-manager-config>> | 
| Token Url a| String | 
| Response Access Token a| String | #[payload.access_token]
| Response Refresh Token a| String | #[payload.refresh_token]
| Response Expires In a| String | #[payload.expires_in]
| Custom Parameter Extractors a| Array of <<ParameterExtractor>> | 
| Refresh Token When a| Boolean | #[attributes.statusCode == 401 or attributes.statusCode == 403]
| Tls Context Factory a| <<Tls>> | 
|======================

