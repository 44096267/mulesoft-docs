= Store the Last Primary Key

In ObjectStore, you store primary keys of inserted rows in a global variable ordernum. The stored data persists over iterations of the flow and from session to session. The next iteration of the flow inserts into the New Orders database any rows in the Classic Models database having primary keys higher than the last inserted row.

. Click + next to Database using the DatabaseToSync configuration, select ObjectStore, and select the Store operation.
. In ObjectStore - Store, enter the following key: 
+
*lastOrder*
+
. In value, type:
+ 
*max(ordernum)*
+
. Click Map.
. On the Script tab, enter the following DataWeave code to store the last primary key value:
----
%dw 2.0

var ordernum = payload.orderNumber

output application/java
---
max(ordernum)
----