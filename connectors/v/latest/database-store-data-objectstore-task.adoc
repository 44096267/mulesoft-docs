= Store the Last Primary Key

In this procedure, you store primary keys of inserted rows in a global variable named ordernum. Using ObjectStore, the stored data persists over iterations of the flow and over sessions. You set the lastOrder number variable to the primary key of the last row inserted. The next iteration of the flow inserts into the New Orders database any rows in the Classic Models database having primary keys higher than the last inserted row.

. Click + next to Database using the DatabaseToSync configuration, select ObjectStore, and select the Store operation.
. In ObjectStore - Store, enter the following key: 
+
*lastOrder*
+
. In value, type:
+ 
*max(ordernum)*
+
. Click Map.
. On the Script tab, enter the following DataWeave code to store the last primary key:
----
%dw 2.0

var ordernum = payload.orderNumber

output application/java
---
max(ordernum)
----