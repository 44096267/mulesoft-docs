= Managing CloudHub Applications
:keywords: cloudhub, managing, monitoring

Once you have deployed an application to CloudHub, you can do all sorts of things with CloudHub to monitor and manage your application at runtime. This page introduces some of the basic management tools of the console regarding stopping, updating, and restarting your application. Please see the additional topics below for information about the console's runtime management tools. 


== Starting and Stopping Your Application

To start or stop an application, you first need to click the desired application from the CloudHub console. On the application dashboard, click *Settings* from the left menu. If your application is undeployed, you can click the *Start* button to initiate deployment.

image:/documentation/download/attachments/123699828/image2014-10-24+14_55_53.png?version=1&modificationDate=1423246481717[image]

If it is currently deployed or in the process of deploying, you can click the *Cancel deployment* or *Stop* button to stop your application at any point.

image:/documentation/download/attachments/123699828/image2014-10-24+15_3_57.png?version=1&modificationDate=1423246500147[image]

== Redeploying to a Different Region

If you have global deployment enabled on your account, you can select a different region for your CloudHub deployments. On the settings page, expand the *Advanced* section, and then select the desired region from the drop-down menu. After you've made your selection, click the *Apply changes* button, which restarts your application in the new region.

image:/documentation/download/attachments/123699828/image2014-10-24+15%3A21%3A40.png?version=1&modificationDate=1423236065798[image]

Administrators can link:/documentation/display/current/Managing+CloudHub+Specific+Settings[set the default region] on the *Organization* tab in Account Settings, but that region can be adjusted here when the application is deployed, if necessary.

[IMPORTANT]
Domains for applications deployed to Europe automatically update to `http://myapplicationdomain.eu.cloudhub.io`. 

== Scaling Your Application

You can dynamically scale your applications by selecting options from the *Workers* drop-down menus, then clicking the *Apply changes* button. Your application  then uses the worker size and amount that you specify. For more information about deploying to multiple workers, see link:/documentation/display/current/Deploying+a+CloudHub+Application#DeployingaCloudHubApplication-WorkerSizing[Worker Sizing].

image:/documentation/download/attachments/123699828/image2014-10-25+10_38_40.png?version=2&modificationDate=1423246665414[image]

[IMPORTANT]
All applications are limited by default to no more than four workers of any size, and free and professional accounts are limited to a single worker per app. If you need more workers or more total vCore capacity, update your subscription. If you need more than four workers for a single domain, please mailto:cloudhub-support@mulesoft.com[contact us] directly.

== Updating Environment Variables and Application Properties

You can configure environment variables for your application using CloudHub. This allows you to externalize important pieces of configuration which may switch depending on the environment in which you're deploying. For example, if you use a Mule application locally you might configure your database host to be `0.0.0.0`. But if you use CloudHub, you might configure it to be an Amazon RDS server.

To create an environment variable or application property, expand the *Advanced* section and set the variable by either using a text `key=value` format or by using the list format with two text boxes. After you've made the change, click the *Apply changes* button. Here's an example using the text format:

image:/documentation/download/attachments/123699828/image2014-10-24+16%3A24%3A35.png?version=1&modificationDate=1423236065820[image]

Here's another example using the list format:

image:/documentation/download/attachments/123699828/image2014-10-24+16%3A25%3A8.png?version=1&modificationDate=1423236065827[image]

These environment variables can be used inside your Mule configuration. For example:

[source, xml]
----
<spring:bean id="jdbcDataSource" class="org.enhydra.jdbc.standard.StandardDataSource" destroy-method="shutdown">
   <spring:property name="driverName" value="com.mysql.jdbc.Driver"/>
   <spring:property name="url"value="${database.url}"/>
</spring:bean>
----

If you also have the same variables set in a mule-app.properties file inside your application, the environment variable settings always overrides mule-app.properties when your application deploys.

To delete an existing environment variable, either delete the line in text format, or in list format hover over the variable on the page and select the "X" button on the right side. To edit an existing variable, just select the name or value on the page and edit it.

When you complete adding, deleting, or editing your environment variables, click the *Apply changes* button to save the changes and redeploy them to your workers.

[NOTE]
*Secure Environment Variables* +
CloudHub also supports link:/documentation/display/current/Secure+Application+Properties[secure environment variables] to protect sensitive information.

== Updating Your Application

If you made changes to your applications and would like to upload a new version, click *Choose file* on the Deployment screen for that application. The new filename appears in italicized text. Click *Apply changes* to use the new file for deployment. Within a few seconds, your application successfully redeploys. While redeploying, the application status indicator changes to blue, and then turns green after the deployment completes. You can click *Logs* to see a live redeployment of your application.

=== Zero Downtime Updates with CloudHub

CloudHub supports updating your application so users of your HTTP APIs experience zero downtime. During your application update, CloudHub keeps both the old version and the new version of your application running. Your domain points to the old version of your application until the new version is fully started. This allows you to keep servicing requests from your old application while the new version of your application is starting.

[cols="2*", options="header"]
|===
| Icon
| Description

| image:/documentation/download/attachments/123699828/image2014-10-24+16%3A43%3A57.png?version=1&modificationDate=1423236065836[image]
| The application update is deploying.

| image:/documentation/download/attachments/123699828/image2014-10-24+16%3A44%3A47.png?version=1&modificationDate=1423236065844[image]
| The updated version of the application didn't start correctly. Mule shuts down the new version and leaves teh old application running.

|===


== Downloading a Copy of Your Deployed Application

The application most recently deployed is always available for download from the console. Just click your application name link on the *Deployment* screen.

image:/documentation/download/attachments/123699828/image2014-10-24+17_5_58.png?version=1&modificationDate=1423246863269[image]

[NOTE]
*Link not available?* +
If you can see the application name, but the name is not a live link, your administrator has disabled application downloads for users with developer and support account types. Contact your administrator if you need a copy of the application.

== Static IPs

CloudHub supports allocating a static IP for applications so that they can be whitelisted for other services. To enable a static IP for your application, please request one via the link:/documentation/display/current/Community+and+Support#CommunityandSupport-Support[support portal].

Once a static IP has been allocated for your application, it is visible under the application deployment tab.

[WARNING]
If your application is deleted, the static IP is lost and you must request a new one.

== Deleting Your Application

To delete your application from CloudHub, simply click *Delete* in the top-right corner of the *Settings* page. Enter the name of the application, and the application undeploys and deletes from CloudHub. At this point, the application domain is available for other applications to use.

[IMPORTANT]
After you delete your application, your log data no longer is accessible through the console. CloudHub archives old log data for a limited period of time before being purged. This allows you to recover the data if needed. Please mailto:cloudhub-support@mulesoft.com[contact us] for more information.

== Creating HTTP Services For Your Application

To make HTTP-based services available under your domain, use the $\{http.port} variable in your configuration. For example:

[source, xml]
----
<endpoint address="http://0.0.0.0:${http.port}/path" .../>
----

CloudHub specifies this port for you and automatically load-balances your domain across the number of workers that you specified.

== See Also

Read about additional tools for managing your applications on CloudHub.

* link:/documentation/display/current/CloudHub+Console+Overview[CloudHub Console Overview]
* link:/documentation/display/current/CloudHub+Administration[CloudHub Administration]
* link:/documentation/display/current/Alerts+and+Notifications[Alerts and Notifications]
* link:/documentation/display/current/CloudHub+Fabric[CloudHub Fabric]
* link:/documentation/display/current/CloudHub+Insight[CloudHub Insight]
* link:/documentation/display/current/Command+Line+Tools[Command Line Tools]
* link:/documentation/display/current/Managing+Application+Data+with+Object+Stores[Managing Application Data with Object Stores]
* link:/documentation/display/current/Managing+Queues[Managing Queues]
* link:/documentation/display/current/Managing+Schedules[Managing Schedules]
* link:/documentation/display/current/Secure+Application+Properties[Secure Application Properties]
* link:/documentation/display/current/Viewing+Log+Data[Viewing Log Data]
* link:/documentation/display/current/Virtual+Private+Cloud[Virtual Private Cloud]
* link:/documentation/display/current/Worker+Monitoring[Worker Monitoring]
* link:/documentation/display/current/Penetration+Testing+Policies[Penetration Testing Policies]
* link:/documentation/display/current/Secure+Data+Gateway[Secure Data Gateway]
