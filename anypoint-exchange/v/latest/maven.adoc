= To Publish and Deploy Exchange Assets Using Maven
:keywords: maven, publish, deploy, facade

Anypoint Exchange provides a Maven facade for its API that you can use with Maven clients to deploy and consume assets using Maven. The facade simplifies the API to work with Maven.

== To Publish an Asset to Exchange Using Maven

. Add the Maven facade as a repository in the distribution management section of your project's POM file.
+
[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <name>Asset name</name>
  <description>Asset description</description>
  <properties>
    <type>connector</type>
  </properties>

  ...

  <distributionManagement>
    <repository>
      <id>Repository</id>
      <name>Corporate Repository</name>
      <url>http://a1aed8de1c2e911e6869912800a68d7d-1180636514.us-east-1.elb.amazonaws.com/api/v1/organizations/2559c34c-bbc7-4a5a-b078-bc1154594906/maven</url>
      <layout>default</layout>
    </repository>
  </distributionManagement>
  ...
</project>
----
+
. Update the settings.xml file in your Maven .m2 directory. After you install Maven, the `mvn clean` command creates the .m2 directory. On a Mac, the directory resides at `~/.m2` whereas under Windows, the directory resides at `<default-drive>\Users\<your-login>\.m2` that contains your Anypoint Platform credentials. The Maven client reads the settings file when Maven runs. 
+
Example settings.xml file:
+
[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <servers>
    <server>
      <id>Repository</id>
      <username>myusername</username>
      <password>mypassword</password>
    </server>
  </servers>
</settings>
----
+
. Publish your asset to Exchange using the Maven `mvn deploy` command.

== To Consume an Exchange Asset with Maven

Add the asset's name in the `dependencies` section of your project's pom.xml file,
and add the Maven facade as a repository in the `repositories` section:

[source,xml,linenums]
----
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
 ...

  <dependencies>
    <dependency>
      <groupId>org.mule.modules</groupId>
      <artifactId>mule-module-sfdc</artifactId>
      <version>8.0.0-SNAPSHOT</version>
    </dependency>
  </dependencies>

 ...

  <repositories>
    <repository>
      <id>Repository</id>
      <name>Corporate Repository</name>
      <url>http://a1aed8de1c2e911e6869912800a68d7d-1180636514.us-east-1.elb.amazonaws.com/api/v1/organizations/2559c34c-bbc7-4a5a-b078-bc1154594906/maven</url>
      <layout>default</layout>
    </repository>
  </repositories>
 ...
</project>
----

== See Also

* link:https://maven.apache.org/[Apache Maven]
