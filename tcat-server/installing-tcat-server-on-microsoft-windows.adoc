= Installing Tcat Server on Microsoft Windows

This document describes how to install MuleSoft Tcat Server on the Microsoft Windows operating system. A basic installation using the Windows installer is described below, followed by advanced installations in text-only and unattended modes. In addition, this document describes how to start and stop Tcat Server, access the Tcat console, and provides advanced configuration and security steps.

[TIP]
====
For additional information and to install Tcat Server on other operating systems, please see:

* link:/docs/display/TCAT/Overview+of+Tcat+Server[Overview] to learn more about the MuleSoft Tcat Server
* link:/docs/display/TCAT/Release+Notes[Release Notes] for the latest new features
* link:/docs/display/TCAT/Installing+Tcat+Server+on+Linux[Installing Tcat Server on Linux]
* link:/docs/display/TCAT/Installing+Tcat+Server+on+Solaris[Installing Tcat Server on Solaris]
* link:/docs/display/TCAT/Installing+Tcat+Server+on+Mac+OS+X[Installing Tcat Server on Mac OS X]

Please send comments or questions to: tcat-install@mulesoft.com
====

*Contents:*

* link:#InstallingTcatServeronMicrosoftWindows-InstallingTcatServeronMicrosoftWindows[Installing Tcat Server on Microsoft Windows]

** link:#InstallingTcatServeronMicrosoftWindows-MicrosoftWindowsOperatingSystemsSupported[Microsoft Windows Operating Systems Supported]

** link:#InstallingTcatServeronMicrosoftWindows-RequiredSoftware[Required Software]

*** link:#InstallingTcatServeronMicrosoftWindows-JRE/JDKVersionsSupported[JRE/JDK Versions Supported]
*** link:#InstallingTcatServeronMicrosoftWindows-SettingtheJAVA_HOMEenvironmentvariable[Setting the JAVA_HOME environment variable]

* link:#InstallingTcatServeronMicrosoftWindows-InstallingTcatServer[Installing Tcat Server]

** link:#InstallingTcatServeronMicrosoftWindows-DownloadTcatServerforWindows[Download Tcat Server for Windows]

** link:#InstallingTcatServeronMicrosoftWindows-InstallationwiththeWindowsInstaller[Installation with the Windows Installer]

** link:#InstallingTcatServeronMicrosoftWindows-UpgradeInstallation[Upgrade Installation]

** link:#InstallingTcatServeronMicrosoftWindows-AdvancedInstallations[Advanced Installations]

**** link:#InstallingTcatServeronMicrosoftWindows-Headless(Text-Based)Installation[Headless (Text-Based) Installation]

***** link:#InstallingTcatServeronMicrosoftWindows-AttendedHeadlessInstallation[Attended Headless Installation]
***** link:#InstallingTcatServeronMicrosoftWindows-UnattendedHeadlessInstallation[Unattended Headless Installation]

** link:#InstallingTcatServeronMicrosoftWindows-AddingTcatServerCapabilitiestoanExistingApacheTomcatInstallation[Adding Tcat Server Capabilities to an Existing Apache Tomcat Installation]

** link:#InstallingTcatServeronMicrosoftWindows-InstallingMultipleTcatInstancesonaSingleComputer[Installing Multiple Tcat Instances on a Single Computer]

* link:#InstallingTcatServeronMicrosoftWindows-StartingandStoppingTcatServer[Starting and Stopping Tcat Server]

* link:#InstallingTcatServeronMicrosoftWindows-StartingtheTcatConsole[Starting the Tcat Console]

* link:#InstallingTcatServeronMicrosoftWindows-AdvancedOptionsandSecurity[Advanced Options and Security]

** link:#InstallingTcatServeronMicrosoftWindows-MakeContentsofWebappsDirectoryUnwriteable[Make Contents of Webapps Directory Unwriteable]
** link:#InstallingTcatServeronMicrosoftWindows-ModifyingJAVA_OPTS[Modifying JAVA_OPTS]

* link:#InstallingTcatServeronMicrosoftWindows-UninstallingTcatServer[Uninstalling Tcat Server]

== Microsoft Windows Operating Systems Supported

Tcat Server has been tested and is supported on the following Microsoft Windows operating systems:

* Windows XP
* Windows Vista
* Windows Server 2003
* Windows Server 2008
* Windows 7

For additional operating systems supported, please see installation documentation on: link:/docs/display/TCAT/Installing+Tcat+Server+on+Linux[Linux], link:/docs/display/TCAT/Installing+Tcat+Server+on+Solaris[Solaris] and link:/docs/display/TCAT/Installing+Tcat+Server+on+Mac+OS+X[Mac OS X].

== Required Software

Tcat Server requires the Java SE Runtime Environment (JRE). You may download Tcat Server with a bundled version of JRE if you do not already have one installed. However, it is strongly recommended that you install the Java SE Developers Kit (JDK). JDK includes JRE and provides additional important utilities such as keytool.

=== JRE/JDK Versions Supported

Tcat Server has been tested and is known to work with the following versions of JRE and JDK for Microsoft Windows:

* Oracle/Sun JRE or JDK version 1.6 or later (any build above 1.6.0_04). If you are only running the Tcat Server agent, and not the Tcat console, Oracle/Sun JRE or JDK version 5 (all builds) will also work.
* Oracle/JRockit version 1.6.0_20 or higher JDK (Tcat v6.4.1 and lower console logs tab shows zero logs)
* IBM J9 version 1.6.0 or higher JDK or JRE (this works with Tcat Server v6.4.2 and higher)

To determine the version of Oracle/Sun JRE installed on your computer, open a Command Prompt window and type `java -version`.

The following Java Runtimes have also been tested but are known to *not work*, and are unsupported:

* Oracle JDK or JRE version 7, releases earlier than update 2 (due to HotSpot loop optimization bugs)
* Oracle/Sun JDK or JRE versions 1.6.0_03 or lower (due to JAXB.. any 1.6.0 Oracle/Sun Hotspot JVM lower than 1.6.0_04 won't work)
* IBM J9 1.5.0 JDK and JRE (due to lack of support for self-signed HTTPS client certificates)

=== Setting the JAVA_HOME environment variable

If you wish to use your own installed JRE or JDK and not the bundled version included with Tcat Server, an environment variable must be manually set. Tcat Server first looks for an installed JDK with the JAVA_HOME environment variable. If it doesn't find a JDK, it looks for a JRE with the JRE_HOME environment variable. If it finds neither, it defaults to using its own bundled JRE.

Follow these steps to set JAVA_HOME or JRE_HOME:

. Open *System Properties* from the Windows Control Panel.
. Click *Advanced* > *Environmental Variables*
. Click *New* below the System Variables window
. In the Variable name form field, enter *JAVA_HOME* if you have an installed JDK (preferred) or JRE_HOME if you have an installed JRE
. In the Variable value form field, enter the location of your JDK or JRE directory.
. Click OK to save the new system variable
. Click OK to close the Environment Variables dialog box
. Click OK to close System Properties

== Installing Tcat Server

[width="99a",cols="50a,50a"]
|===
|image:check.png[check] |You will need to know the default credentials to access the Tcat Server dashboard once installation is complete. Both the username and password default to "admin" as detailed below.
|===

=== Download Tcat Server for Windows

Download the latest Tcat Server release by going to the Tcat Overview Page http://www.mulesoft.com/tcat-server-enterprise-tomcat-application-server and clicking on the *Download Now* button.

=== Installation with the Windows Installer

Follow these steps for a Tcat Server installation using the Windows installer. All defaults may be chosen for an initial installation. However, custom ports, installation directory and a service instance name can be customized by changing the defaults as shown below. Later, when installing additional Tcat Server instance on one or more remote computers, the Tcat console need not be installed.

. Download Tcat Server from the link above.
. Close all programs on your desktop.
. Run the installer. The welcome screen will open in a few moments, click Next and accept the license agreement.
. Choose a Standard Installation to install both Tcat Server and the Tcat console. Choose Custom Installation if you wish to only install Tcat Server on a remote computer that will be administered by your primary installation. You can also choose to optionally install Apache Tomcat documentation.
+
image:WindowsInstallStandard.png[WindowsInstallStandard]
+

. After choosing the directory for installation, the next screen allows you to configure ports. Ports can also be later changed in the `conf\server.xml` and `conf\Catalina\localhost\agent.properties` files.
+
image:WindowsInstallPorts.png[WindowsInstallPorts]
+

. The next screen allows you to choose whether Tcat Server is installed as a Windows service; it can also be installed as a console shell application but will then need to be manually started after server reboots.
+
image:WindowsInstallService.png[WindowsInstallService]
+

. After choosing the default Start Menu Folder, the installation will start and take several minutes to complete.
. Start Tcat Server by going to the Start Menu, selecting All Programs, then selecting "Start Tcat Server 6" in the Tcat Server 6 program group.
. Open a web browser and navigate to: http://localhost:8080/console
.Log in with "admin" for both the username and password.
.The Tcat Server dashboard will launch in your web browser.
+
image:TcatDashboard.png[TcatDashboard]
+

[width="99a",cols="50a,50a"]
|===
|image:check.png[check] |Your next steps after launching the Tcat dashboard include registering a server in the console, and then adding a new web application to the server instance. See the link:/docs/display/TCAT/Working+with+Servers[Working with Servers] guide for additional steps in these procedures.
|===

=== Upgrade Installation

If you are upgrading from a previous release of Tcat Server, see link:/docs/display/TCAT/Upgrading+to+R4[Upgrading to Tcat Server 6 R4] and follow the upgrade instructions provided in this document.

=== Advanced Installations

Advanced installations allow users to install Tcat Server with non-default options, and also allow for text-based and unattended installations. These installation options are outlined in this section.

==== Headless (Text-Based) Installation

This section describes how to install Tcat Server in a "headless" (text-only) mode. This mode of installation allows users to first specify installation options including the installation directory, the server ports, and more. After answering these questions in the shell, the installer will begin an unattended installation. The headless installation also allows users to automate multiple installs in a non-interactive mode as detailed below.

===== Attended Headless Installation

To begin the headless installation, open a Command Prompt window and navigate to the directory where Tcat Server was downloaded, then type the following at the prompt (using your downloaded filename as it may differ from this):

`C:\> start \wait tcat-installer-6.4.4-windows-64bit.exe -c`

The installer's interaction in the Command Prompt window will look similar to this:

===== Unattended Headless Installation

Several options are available for an unattended headless installation:

*1. Default Installation*
If you wish to install Tcat Server with all default options, use the -q argument instead of -c. This will install the software in its default location of `c:\TcatServer6` including both Tcat Server and the Tcat console. It will also use all default port numbers, which can later be changed in the `conf\server.xml` and `conf\Catalina\localhost\agent.properties` files.

The command for a default installation is (check that you are using your downloaded filename):
`C:\> start tcat-installer-6.4.4-windows-64bit.exe -q -console`

If you wish for no output to be shown, remove the argument `-console`

*2. Installation with an External Options File*
An options file can be produced and referenced during the headless installation. If the installer has already been run, then a default option file `response.varfile` already exists in the `.install4j` directory within your installation directory. It is best to copy and modify this file and use it for future installations. Otherwise, the following code can be copied into a new text file, and customized for your use if necessary. It can then be used as the installation option file when installing Tcat Server version 6.4.4. The contents of this varfile is in the same format as a simple Java properties file:

After producing the above options file, and naming it `response.varfile`, execute the following command in the Command Prompt window to start installation (using your downloaded filename):

The `-q -console` arguments are optional but without them, no output will be shown in the Command Prompt window. They need to be present as the first and second arguments as shown above to take effect.

To also display debugging information about the installation in the Command Prompt window, use the following command to start installation:

=== Adding Tcat Server Capabilities to an Existing Apache Tomcat Installation

Tcat Server capabilities can be added to an existing Apache Tomcat installation. All Tomcat 5.5.x and higher releases, and all Tomcat 6.0.x and 7.0.x releases are supported. Please reference link:/docs/display/TCAT/Add+Tcat+Server+Capabilities+to+an+Existing+Tomcat+Install[Add Tcat Server Capabilities to an Existing Tomcat Install] for installation instructions.

=== Installing Multiple Tcat Instances on a Single Computer

Multiple instances of Tcat Server can be run on a single machine. One instance (or more) of the Tcat console will allow users to manage all the additional Tcat Server instances, each running in their own Java Virtual Machine (JVM). For more information, see link:/docs/display/TCAT/Installing+Multiple+Tcat+Instances+on+a+Single+Machine[Installing Multiple Tcat Instances on a Single Machine].

== Starting and Stopping Tcat Server

[width="99a",cols="50a,50a"]
|===
|image:warning.png[warning] |If you want to use the standard Tomcat `catalina` or `startup` commands to start Tomcat, any environment variables you set in the Tcat console will not take effect until you restart Tomcat using Tcat Server commands. Therefore, for best results when setting environment variables in the Tcat console, you should always start Tomcat using Tcat Server commands described below.
|===

If you installed Tcat Server with the Windows installer, a program group "Tcat Server 6" was created in your Windows Start menu. This program group includes commands to start, stop and restart Tcat Server. It also provides a direct link to the Tcat console.

In addition, the following commands are also available from the Command Prompt. To execute these commands, navigate to the bin directory under your Tcat Server installation directory (with a default installation, this would be located at `c:\TcatServer6\bin`).

To start Tcat Server:

To stop Tcat Server:

To restart Tcat Server:

To obtain the server's status and process ID:

As a next step, you may wish to start the Tcat console as detailed in the following section.

== Starting the Tcat Console

The Tcat console is an administration console for managing and monitoring Tomcat instances. To run the Tcat console on a local installation, enter http://localhost:8080/console in your web browser. If the server is remote or you changed the default port, replace `localhost:8080` with the correct server name and port where the console is deployed.

You can now select and register one or more of the unregistered servers, adding them to server groups as needed. For more details, see link:/docs/display/TCAT/Working+with+Servers[Working with Servers].

== Advanced Options and Security

This section details a few important advanced options. For more information about configuring Tcat Server, please see the http://www.mulesoft.org/documentation/download/attachments/25854000/tcat-102010.pdf?version=1&modificationDate=1287625483898[Administration Guide].

=== Make Contents of Webapps Directory Unwriteable

By default, the Tcat console enables a user to edit files on any Tcat Server instance registered to it. For additional security, you may wish to make the Webapps directory unwriteable.

This property is set in the `spring-services.xml` file located in the `webapps/agent/WEB-INF/` directory. Below is the relevant snippet:

To disable this ability, take the following steps:

. Uncomment last element shown in the above snipper, replacing this with this
. Save the file
. Restart Tcat Server instance

=== Modifying JAVA_OPTS

You may wish to modify the JAVA_OPTS environment variable for several reasons:

* To enable JMX so that you obtain more detailed information about connectors and server status, e.g., `-Dcom.sun.management.jmxremote`
* To increase memory settings because you are installing all the components offered in the installer, as an example: `-Xmx512M -XX:PermSize=64M -XX:MaxPermSize=128M`
* To modify the secure port, as an example: `-Dtcat.securePort=51444`

JAVA_OPTS can be modified after installing Tcat Server using the Tcat console. This can be done in two ways:

. Manually setting the options on each server by link:/docs/display/TCAT/Monitoring+a+Server#MonitoringaServer-envvars[modifying the server's environment variables]
. Or by modifying the options in the link:/docs/display/TCAT/Working+with+Server+Profiles[server profile] that you use across multiple Tcat Server instances. This requires administration privileges.

== Uninstalling Tcat Server

The following options will uninstall Tcat Server:

* For a Tcat Server installation via the Windows installer, choose Uninstall Tcat Server from the Tcat Server 6 group in the Windows Start menu.
* If Tcat Server and Tomcat were manually installed in the same directory, and you want to delete both programs, simply delete the entire folder.
* If Tcat Server was manually installed on an existing Tomcat installation, delete the console, agent webapps and their folders from the webapps directory.
