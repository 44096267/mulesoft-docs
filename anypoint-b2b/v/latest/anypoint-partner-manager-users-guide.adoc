= Anypoint Partner Manager User's Guide
:keywords: b2b, portal, partner, manager

[NOTE]
Anypoint Partner Manager is currently in beta. For access or more information, talk to your account executive.

Anypoint Partner Manager enables all configuration and monitoring for AnyPoint B2B flows.

// image:b2b_intro_03.png[b2b_intro_03]

== Trading Partner Management

The following steps are required to configure settings for a B2B flow using Anypoint Partner Manager.

In Anypoint Partner Manager:

* <<Set up the home organization>>
* <<Set up an external trading partner>>

In AnyPoint Studio:

* Build your flow
* Configure the B2B Connector
* Configure B2B-enabled Connectors to use the B2B Connector
* Complete the flow
* Use standard MuleSoft connectors and processors to complete the processing and integration of the message into downstream systems as required.

=== Set up the home organization

The _home organization_ is the company using Anypoint B2B. There is no setup required, but you may configure the following settings:

* Company Name that is displayed in the Portal 
* Contact information
* AS2 Identity Settings

=== Set up an external trading partner

In order to exchange B2B messages with another company, you must create a Trading Partner in APM. You can configure trading partner information for:

* <<Contacts>>
* <<Transport>>
** <<AS2>>
** <<FTP>>
* <<Format>>
** <<X12>>
** <<EDIFACT>>
* <<Transactions>>

==== Contacts

In the contacts section you can configure the name that is displayed for the trading partner, and optionally technical and business contacts for the partner.

===== Enter contact information

. Start APM. The *Anypoint Platform* page appears, with *B2B Transmisssions* selected.
. Click *Trading Partners*. The *Trading Partners* page appears.
. Click *Create*. The *Partnership* page appears.
. In the *Contacts* section of the *Partnership* page, enter the following:
** *Company Name*
** *Contact type* +
(In the dropdown listbox, select *Technical*, *Business*, or *Both*)
. After you enter a contact type, you can enter the following contact-specific information:
** *First Name*
** *Last Name*
** *Title*
** *E-mail*
** *Office Phone*
** *Mobile Phone*
** *Fax*
** *Address Line 1*
** *Address Line 2*
** *City*
** *State*
** *Postal Code*
** *Country*

. Click *Save* to save the values you entered in the previous steps.
. Click *Next*.
+
The AS/2 Settings page appears.

==== Transport

In the Transport Settings section, you can configure the default options for any B2B-enabled transport connectors, currently AS2 and FTP/S.

===== AS2

AS2 is a secure transport protocol that enables files to be signed or encrypted to send files
between your company and your trading partners. You can enter information for both inbound and outbound settings.


====== Enter AS2 Identity Settings

. In the *AS2 Identity* box, enter the trading partner-assigned name associated with this trading partner’s Production AS2 ID.
. Click Choose File to select and upload this trading partner’s AS2 Certificate.
+ The *Certificate Name*, *Expiration* and *Thumbprint* fields automatically populate when an AS2 certificate is uploaded.

====== Enter AS2 Settings - Outbound

The AS2 Outbound Settings are for your trading partner’s specific AS2 settings such as *URL*.

URL::
(including port-Example www.midsizesupplier.com:8080.
This field will be required if you are using AS2 as your transport protocol.
Content Type::
def
Digest Algorithm::
Based on your company security choices
Failback Digest Algorithm::
Optional (Defaults to none)
Subject::
def
Filename::
def
Encoding::
Based on your company security choices
Encryption Algorithm::
Based on your company security choices
MDN Async URL::
An Async MDN will return the MDN to the URL at a later time for files sent if an MDN is required.
If you are using Async MDN, enter the URL and port to which it should be sent.

Checkbox Options:

Compress::
def
Message Encrypted::
def
Message Signed::
def

MDN Required::
def

NOTE: If this checkbox is selected, the *Require Receipt for Unsupported Digest Algorithm* and *Require Receipt for Unsupported Signature Format* checkboxes appear.

MDN Signed::
def

MDN Async::
def

====== Enter AS2 Settings - Inbound

 URL::
 def
 MDN Subject::
 def
 Preferred Digest Algorithm::
 Dropdown listbox: *None*, *SHA1*, *MD5*

Checkbox options:

 Compress::
 def

 Message Encrypted::
 def

 Message Signed::
 def

 MDN Required::
 def

 MDN Signed::
 def

===== FTPS

_FTPS_ is an extension to the commonly used File Transfer Protocol (FTP) that adds support for the Transport Layer Security (TLS) and Secure Sockets Layer (SSL) cryptographic protocols.

====== Enter FTP Settings - Outbound

Server Address::
Location in which inbound documents will be placed.
Port::
Specific inbound port to be used with this trading partner. Set the host of your FTP server, this can be an IP address or a host name.
User Name::
def
Password::
def
Transfer Mode::
Use passive mode whenever possible. It is easier to set up from the client’s perspective.
SSL Mode::
Explicit|Implicit
Enable Server Validation::
Selecting this checkbox will validate the servers identity; only JKS format is supported at this time.
Upload Temporary Directory::
Places the files in this location until they complete uploading.

====== Enter FTP Settings - Inbound

FTPS Outbound has the same settings as FTPS Inbound as described above with the addition of  *Maximum Number of Download Threads*, which is the number of worker threads to use when downloading multiple files (useful when reading files using a wildcard pattern or a directory).


==== Format

In the Format Settings section you can configure the default options for supported B2B format standards (currently EDI X12 and EDIFACT).

===== X12

X12 standards define the structure, format, and content of business transactions conducted through Electronic Data Interchange (EDI) and are used in conjunction with
AS2 or FTPS as transport for these transaction sets.

====== Enter X12 Identity Settings

Interchange ID qualifier (ISA)::
def
Interchange ID (ISA)::
def

====== Enter X12 Settings - Inbound

*Envelope Headers (ISA)*:

Auth. Info. Qualifier (ISA 01)::
Defaults to *00*, but there are six other valid
values in the dropdown. The most common value is *00*.

Authorization Information (ISA 02)::
defaults to a blank value. This field is editable if another value is needed.

Security Inf. Qualifier (ISA 03)::
defaulted to a 00 but is an editable field if another value is needed.

Security Information (ISA 04)::
defaults to a blank value. This field is editable if another value is needed in this field.
Interchange sender ID qualifier (ISA 05)::
drop down populated with the more common EDI Partner qualifiers. If you need a different value choose Custom in the drop down and enter your valid trading partner qualifier.

Interchange sender ID (ISA 06)::
free form field to enter your trading partner’s EDI ID. This field is alphanumeric with a max of 15 characters

Interchange receiver ID qualifier (ISA 07)::
drop down populated with the more common EDI Partner qualifiers. If you need a different value choose Custom in the drop down and enter your valid qualifier.

Interchange receiver ID (ISA 08)::
free form field to enter EDI ID. This field is alphanumeric with a max of 15 characters.

Interchange Control Version (ISA 12)::
Drop down value to choose which X12 version
Your partner will be using.  this time 4010 and 5010 are the supported versions.

*Parser checkbox settings*:

There are eight optional Parser settings that you can select for trading partners inbound documents. The expected behavior if these options are selected is a *997* stating a failure will be sent for the condition.

* Fail document when value length outside allowed range
* Fail document when invalid character in value
* Allow only ASCII characters for AN values
* Fail document if unknown segments are used
* Fail document when segments are out of order
* Fail document when unused segments are included
* Fail document when too many repeats of a segment
* Generate 999 +
If a 999 acknowledgement is needed check this box. The default X12 acknowledgement will be 997.

*Character Set and Encoding*

The Character Set field is a drop down. Basic, Extended and Unrestricted are the field value choices supported.

The Basic character set includes the following uppercase letters, digits, space, and special characters: A through Z, 0 through 9, ! “ & ’ ( ) * + , - . / : ; ? = (space).
The Extended character set includes the characters in the Basic character set, and lowercase letters, select language characters, and other special characters: a through z, % @ [ ] _ { } \ | < > ~ # $.

The Unrestricted character set takes in all characters.

*Control Number Settings*

These settings, if checked, will require unique inbound ISA 13, GS 06 and ST 02 control numbers on all inbound documents for this trading partner.

* Require unique ISA control numbers (ISA 13)
* Require unique GS control numbers (GS 06)
* Require unique transaction set control numbers (ST 02)


===== EDIFACT

intro

====== To enter EDIFACT information

procedure and box info

==== Transactions

In the Transactions section you can configure specific transactions you expect to process with this trading partner. Transactions can be inbound or outbound and each is defined by a transport protocol and format protocol. For example, if you expect to receive X12 850 messages and to respond with X12 856 messages, you would set those transactions up as inbound and outbound respectively.

==== To enter transaction information

procedure and box info



==== Format Settings

In the Format Settings section you can configure the default options for supported B2B format standards, currently EDI X12 and EDIFACT.

==== Transactions

In the Transactions section you can configure specific transactions you expect to process with this trading partner. Transactions can be inbound or outbound and each is defined by a transport protocol and format protocol. For example, if you expect to receive X12 850 messages and to respond with X12 856 messages, you would set those transactions up as inbound and outbound respectively.

[NOTE]
In Beta 1, you are only required to set up transactions if you are using the FTP/S transport. Future versions of Anypoint B2B provide options to override the default partner settings in specific transactions, and to control which transactions can be exchanged with a specific trading partner.

== Monitoring B2B Transmissions

The Partner Manager also supports monitoring the tracking data for B2B Transmissions.

// image:b2b_intro_05.png[b2b_intro_05]

YOu can use the settings in the following sections to filter for the specific data you are looking for.

==== Partner

Leave unselected to search all trading partners, or select a specific partner.

==== Type

Select “All” to search all types of B2B messages. Select X12, EDIFACT, AS2, or FTP/S to filter for messages by a specific format or transport. The Type selection also adjusts the fields that are displayed.

Select “All” to search all types of B2B messages. Select X12, EDIFACT, AS2, or FTP/S to filter for messages by a specific format or transport. The Type selection also adjusts the fields that are displayed.

==== Direction

Select the direction to view inbound messages only, outbound messages only, or both.

==== Date

Set the time window for the messages searched. You can quickly set all messages in the past day, week, or month, or set a custom date range.

==== FileName

Search for a specific file or all files that start with the same text.

==== ISA Control #

Search for a message by Control#. (Only enabled when the Type is X12 or EDIFACT.

== Getting Started

* link:/anypoint-b2b/as2-and-edi-x12-purchase-order-walkthrough[AS2 and EDI X12 Purchase Order WalkThrough]
* link:/anypoint-b2b/ftps-and-edi-x12-purchase-order-walkthrough[FTPS and EDI X12 Purchase Order Walkthrough]
