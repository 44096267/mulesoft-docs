= To Configure Auto-Discovery (Latest and Classic)

In a Mule 4 app, to identify an API you need to provide its apiId and a reference to the API's main flow. The main flow is where the HTTP listener is defined. The apiId in Mule 4 replaces the API Name and API Version used to specify auto-discovery in releases before Mule 4. Mule 4 supports tracking an API that resides in Exchange instead of creating an API in API Manager, which resulted in this change. 

This procedure describes how to find the environment credentials and configure auto-discovery for deploying APIs from the Mule command line.

== Mule 4

This procedure assumes you created instances of an API version. You need to deploy the instance. 

. On the API administration dashboard, expand the API version name to display the instances.
+
image::instances-jsonplaceholder.png[height=267,width=518]
+
. Click an instance name.
+
The environment credentials, ID:Label (31429:Basic516) in this example and the reference to the API's main flow (`flowRef="proxy"`), appear:
+
image::autodiscovery-groupid-assetid.png[height=186,width=542]
. Use the following syntax for specifying the apiId:

`<api-gateway:autodiscovery apiId="${api.id}" flowRef="proxy" />`

== Mule 3.8.x

Configure a production API Gateway for integration with Anypoint Platform. For more information, see the link below for configuring API Gateway.

== See Also

* link:/api-manager/api-auto-discovery[About Auto-Discovery]
* link:/api-manager/create-instance-task[To Create an API Instance]
* link:/api-manager/configuring-an-api-gateway#configuring-your-production-api-gateway-for-integration-with-the-anypoint-platform[Configure API Gateway]



