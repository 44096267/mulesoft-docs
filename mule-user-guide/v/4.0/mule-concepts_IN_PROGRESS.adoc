= Key Concepts
:keywords: studio, server, components, connectors, elements, big picture, architecture
:imagesdir: ./_images
:toc: macro
:toc-title:
:toclevels: 1

[[concept_attribute]]
== Attributes

//TODO: are attributes accessible from the application?
Part of the <<Mule Event Object>> that contains metadata for the <<Payload>>. For example, an HTTP POST request for an XML file to a Mule application generates a <<Mule Message>> whose attributes are the HTTP headers.
The message payload is the XML file.

[[concept_component]]
== Component

Building block of a <<Mule Application>>. A component determines the logic to process the <<Mule Event>>. Generic categories of components in a Mule application are these:

* <<Flow>>
* <<Event Source>>
* <<Event Processor>>
// TODO/QUESTION: A FLOW IS A COMPONENT? I THOUGHT COMPONENTS WERE CONNECTORS, ETC.

[[concept_configuration]]
== Configuration

Global configurations for a specific <<Module>> are typically defined for a connector.
// TODO/QUESTION: THERE ARE ALSO OPERATOR CONFIGURATIONS THAT ARE LOCAL.


// TODO: WE CURRENTLY define DW in AT LEAST three places. Need to consolidate somehow.
[[concept_dataweave]]
== DataWeave

DataWeave is the primary language used for formulating expressions in Mule, allowing you to access, manipulate, and use information from the message and its environment. 

At runtime, Mule evaluates expressions while executing a flow to:

* Extract information from the Mule event.
* Restructure or manipulate any part of the Mule event.
// TODO: Define if DW can be used to filter muleEvents.
* Define a filter, to allow certain Mule events to continue to be processed in a flow based on certain criteria.
* Set or manipulate a value in the message attribute, the payload, or a variable.
* Perform an operation on information in the Mule event, application, Mule instance, or server.

// TODO/QUESTION: SHOULDN'T WE CALL THIS A TRIGGER?
[[concept_event_source]]
== Event Source

An *Event Source* waits for an event that triggers it. The Event Source performs logic to define a corresponding Mule Event object. It then forwards this object to the next <<Component>> in the flow.

// TODO/QUESTION: POLL TRIGGER? IF SO, IT WOULDN'T WAIT. IT WOULD TRIGGER A PROCESS AT REGULAR INTERVALS.
Examples of *event sources*:

* *HTTP Listener*
* *File Directory Watcher*

[[concept_event_processor]]
== Event Processor

<<Component>> that conducts backend processes for specific business logic for a <<Mule Event>>.

// TODO/QUESTION: SOME OF THESE AREN'T IN DESIGN CENTER YET. THESE DON'T SEEM QUITE RIGHT IN DESIGN CENTER.
They are grouped based on the actions they facilitate:

* Operation
* Scope
* Router
* Transformer
* Module

// TODO/QUESTION: NEED AN EXAMPLE
[[concept_module]]
== Module

A package of functionality for Mule. It can combine event sources, perform operations, and offer a number configurations, each of which may support a subset of operations.

Each module can extend the runtime capabilities allowing users to configure connections to different services almost automatically.

// TODO: Modules to use to validate

// TODO: Determine if this is technically accurate
// TODO/QUESTION: TALKS ABOUT MODULES AND COMPONENTS HERE. ARE THEY MEANT TO BE THE SAME THING?
Importantly, modules do not require any Mule-specific code. They can be POJOs, Spring beans, Java beans, Groovy scripts, or web services containing the business logic for processing data. Components can even be developed in other languages such as Python, JavaScript, Ruby, and PHP. Mule’s catalog of components support the most commonly used Enterprise Integration Patterns.

Some examples of *modules* are the _SalesForce Connector_ and the _SAP Connector_.

[[concept_flow]]
== Flow

A flow is a sequence of <<Components>> that handle the <<Mule Event>>.

When you link together several individual elements to handle the receipt, processing, and eventual routing of a Mule event you are essentially composing a flow.

Typically, a flow starts with an event source. When the event source is triggered, a Mule event is created.

Then, Event Processors transform, enrich, and filter the Mule event.

[[concept_mule_application]]
== Mule Application
TODO: NEED DESCRIPTION

[[concept_mule_event]]
== Mule Event

An object containing the core information processed by Mule Runtime. It travels through Components inside your Mule application following the configured application logic.

A Mule event is generated by the Event source of a flow, which is configured to be triggered by a _resource_ that might be external to the Mule Runtime, such as an HTTP request, or a change to a database or file.

image::mule-concepts-75c78.png[mule-concepts-75c78]

. An *external event* triggers the *event source*.
. The event source produces a *Mule event* object.
. The Mule event travels sequentially through the components of a *flow*.
. Each component interacts in a pre-defined manner with the Mule event.

A *Mule Event* composed of:

* A *payload* with the main data that the mule application processes.
* A collection of *Attributes* with metadata about the message's payload.
* *Variables*, which are pieces of information about the *Mule Event* meant to be used by the application that is processing it.

[NOTE]
Do not confuse the event that triggers a Mule application with the Mule event. The Mule event is created in response to the external event.

[[concept_mule_runtime]]
== Mule Runtime

Runtime engine that defines the rules for handling event data in a Mule application.

[[concept_mule_message]]
== Mule Message

The core business information of a Mule event. A Mule message is composed of a *payload* - the most important data of the Mule event, and *attributes*, which are metadata for the message payload.

[NOTE]
Large messages or streaming messages can be processed as *records* in a *batch job*.

[[concept_payload]]
== Payload

The *payload* is the core information of a *Mule message* containing the core data to be processed in the Mule flow.

== Operation

*Operations* apply specific actions in the Mule application. They can be used to generate a request to an external source, or to point to local resources within an application's package structure.

Examples of *operations* are any connectors that are supported by a module, like the Database Connector. Most connectors are now based on the operation model.

// TODO: None of this functionality is in Design Center yet.
== Router

*Routers* can be used to direct, resequence, split and aggregate Mule events.

// These are not in Design Center.
Some examples of routers are _Splitter_, _Scatter-gather_ and _Resequencer_.

== Scope

*Scopes* can wrap a group of *operations* within a *flow* to define a fine-grained behavior for them to apply. They can be used to define the frequency at which to perform an operation, or to specify that a certain group of *operations* should be applied asynchronously.

// TODO: is async a scope or a router?
//Some examples of scopes are *Poll* and *Async*.
An example of a scope is a Poll.
//TODO: Can I use a scope to enrich a message payload?

== Transformer

A *component* that changes the contents of the *Mule event*.

// These are not in Design Center.
Some examples of *transformers* are _Object to XML_ and the _Object to String_ transformers.

[CAUTION]
Transformers are included in Mule 4 Beta for compatibility reasons. They will be deprecated for future releases. +
Transformations should be carried out through DataWeave expressions in the Transform component.

== Variables

// TODO: Require more context around variables.
In Mule terms, variables are used to hold metadata for the Mule event. These can be defined and referenced in your application.

Variables can store metadata resulting from different operations performed throughout the application or to add metadata to a processing Mule event.

// TODO: Would it make sense to show Event Context (ExecutionContext) ?
// === Event Context
//The ExecutionContext that does not change within the scope of a single request and has the orginalPayload, MEP, credentials as well as reference to txContext and muleContext.
