= For Each Scope XML Reference

For Each scopes open and close with a `<foreach>` tag. Components that are affected by this scope are defined as child elements of the `<foreach>` tag.

== Configurable Properties

[%header,cols="10,10,80"]
|===
|Property | Default | Description
| `collection`
| `payload`
| Where to find the data to split and process. For example, `#[payload.items]` makes the For Each scope deal with the elements of a collection in `payload.topics`. Any data outside this collection, such as in `payload.transactionId`, is ignored.

| `counterVariableName`
| `counter`
| Names the variable that For Each uses to record the number of the elements it has processed.

| `batchSize`
| `1`
| Number of elements in each batch that For Each processes. For example, if a collection has 200 elements and you set the batch size to 50, it processes 4 batches of 50 elements each.

| `rootMessageVariableName`
| `rootMessage`
| Names the variable that For Each uses to reference the complete, unsplit message collection.
|===

== Example

[source,xml,linenums]
----
<foreach collection="#[payload.name]" doc:name="For Each" counterVariableName="counter" rootMessageVariableName="rootMessage" batchSize="5">
    <some-nested-element/>
    <some-other-nested-element/>
</foreach>
----






== See Also

* link:/mule-user-guide/v/4.0/for-each-scope-concept[About the For Each Scope]
* link:/mule-user-guide/v/4.0/scopes-concept[About Scopes]
* link:/mule-user-guide/v/4.0/about-mule-event[About the Mule Event]
* link:/mule-user-guide/v/4.0/about-mule-message[About the Mule Message]
