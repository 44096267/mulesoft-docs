= To Create a Keyspace

This procedure shows how to create a keyspace using SimpleStrategy on a single Cassandra node.

. Start Cassandra and Anypoint Studio.
. Create a new Anypoint Studio project, and in the Package Explorer, open mule-app-properties. Add the following properties and values:
+
----
username=cassandra
password=cassandra
host=localhost
keyspace=Excelsior
port=9042
----
+
. Create a flow by dragging an HTTP connector from the palette to the canvas, select the connector, and set the Path in HTTP properties to */single*. In HTTP properties, click image:plus.png.
. In HTTP Listener Configuration, accept the default host = localhost and port = 8081, drag a Transform Message component from the palette to the right (process) side of the flow, select the component, and set the output payload as follows:
+
----
%dw 1.0
%output application/java
---
{
	keyspaceName: inboundProperties."http.query.params".ks_name,
	replicationFactor: inboundProperties."http.query.params".rf,
	replicationStrategyClass: inboundProperties."http.query.params".rs_class
} as :object {
    class : "com.mulesoft.mule.cassandradb.metadata.CreateKeyspaceInput"
}
----
+
. Drag a Cassandra connector to the right of the Transform Message component, select the connector. In Operation, select Create Keyspace, and click image:plus.png.
. In CassandraDB Username/Password Connection, set the following options that align with settings in mule-app-properties to placeholder values:
+
* Username: *${username}*
* Password: *${password}*
* Host: *${keyspace}*
* Port: *${port}*
+
Test the connection.
+
. In a browser, use the following URL to enter query parameter for the keyspace name (ks_name), replication factor (rf), and replication strategy class (rs_class):
+
`+http://localhost:8081/simple?ks_name=simple_keyspace&rf=3&rs_class=SimpleStrategy+`
+
. On the cqlsh command line, check that the keyspace was created:
+
*describe schema*
+
Output shows the simple_keyspace exists:
+
----
CREATE KEYSPACE simple_keyspace WITH replication = {'class': 'SimpleStrategy', 'replication_factor': '3'}  AND durable_writes = true;
----
