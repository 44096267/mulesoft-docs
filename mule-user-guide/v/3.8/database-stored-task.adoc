= To Pass an Input Parameter to a Stored Procedure Call

Run this example to update a "bonus" field in a table where salary and bonus amounts are stored. 

image:database-connector-examples-8b1f9.png[flow pic stored proc]

. First set up another table in your MySQL database, `salary`, with the primary key as `emp_no`, with a `salary_amount` and `bonus` entry for each person.
+
----
CREATE TABLE salary (
emp_no INT NOT NULL,
salary_amount INT NOT NULL,
bonus INT NOT NULL,
PRIMARY KEY (emp_no)
);
----
+
. Perform the INSERT statements to populate the table.
+
[source]
----
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1011,75000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1012,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1013,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1014,70000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1015,150000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1016,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1017,75000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1018,70000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1019,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1020,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1021,75000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1022,75000,1000);
----
+
. Create a simple stored procedure like this one, which adds a given amount to the bonus stored in the table "salary".
+
----
CREATE DEFINER=`root`@`localhost` PROCEDURE `add_bonus_by_emp_no`(IN EMP_NO integer,
IN ADDL_BONUS integer)
BEGIN
UPDATE salary
SET bonus = ADDL_BONUS + bonus
WHERE salary.emp_no=EMP_NO;
END
----
+
. One would call this example procedure to increase the employee's bonus using the employee number. The first argument is passed as an input parameter, `<db:in-param name="empno" value="#[payload]"/>`. The second argument is the amount to add to the bonus.
+
----
CALL add_bonus_by_emp_no(:empno,500);
----
+
. This call is represented in the example by:
`<db:parameterized-query><![CDATA[CALL add_bonus_by_emp_no(empno,500);]]></db:parameterized-query>`. Here is how you set up the stored procedure in Studio.
+
image:database-connector-examples-fe6e9.png[]
+
The employee ID is passed as an input parameter. It is first ingested by the application from the HTTP query parameter, when the HTTP endpoint is hit: `http://localhost:8081/getemps?emp=1065`
+
. Here is the full code for a simple app that calls a stored procedure using the payload as an input/"in" parameter. Make sure to modify the credentials and endpoint in the database connector global element for your MySQL instance.
+
[source, xml, linenums]
----
include::_sources/mysql-empno-in-param.xml[in param example]
----

== See Also

* link:/mule-user-guide/v/3.8/batch-processing[batch processing]
* link:/mule-user-guide/v/3.8/poll-reference[poll scope]