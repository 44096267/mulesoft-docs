= To Pass an Input Parameter to a Stored Procedure Call

Run this example to update a "bonus" field in a table where salary and bonus amounts are stored. You can download the XML code for this example from the following location:

`+https://docs.mulesoft.com/mule-user-guide/v/3.8/_attachments/database-stored-task.txt+`

To use the code, modify the credentials and endpoint in the database connector global element for your MySQL instance. 

. In Studio, create a new project, and drag connectors onto the canvas as follows:
+
* Drag an HTTP connector onto the canvas and set the path to */getemps*. Accept other default options or change them to match your environment.
* Drag a Set Payload connector onto the _process_ section of the canvas and set its message to the following expression:
+
`#[message.inboundProperties.'http.query.params'.emp]`
+
. Drag a database connector to the canvas and configure it to connect to a MySQL database.
. Drag a logger onto the canvas and set the message to `#[payload]`.
+
image::database-connector-examples-8b1f9.png[4 connectors]
+
. On the MySQL command line or in the MySQL Admin, set up a table in the MySQL database, `salary`, with the primary key as `emp_no`, with a `salary_amount` and `bonus` entry for each person.
+
----
CREATE TABLE salary (
emp_no INT NOT NULL,
salary_amount INT NOT NULL,
bonus INT NOT NULL,
PRIMARY KEY (emp_no)
);
----
+
. On the mysql command line or in in the MySQL Admin, execute these INSERT statements to populate the table.
+
[source,code,linenums]
----
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1011,75000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1012,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1013,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1014,70000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1015,150000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1016,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1017,75000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1018,70000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1019,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1020,50000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1021,75000,1000);
INSERT INTO salary (emp_no,salary_amount,bonus) VALUES (1022,75000,1000);
----
+
. On the MySQL command line, reate the following stored procedure to add an amount to the bonus stored in the salary table.
+
----
CREATE DEFINER=`root`@`localhost` PROCEDURE `add_bonus_by_emp_no`(IN EMP_NO integer,
IN ADDL_BONUS integer)
BEGIN
UPDATE salary
SET bonus = ADDL_BONUS + bonus
WHERE salary.emp_no=EMP_NO;
END
----
+
You call this example procedure to increase the employee's bonus using the employee number. Pass the first argument as an input parameter, `<db:in-param name="empno" value="#[payload]"/>`. The second argument is the amount to add to the bonus.
+
. In Studio, open the database connector configuration properties editor. In Parameterized Query, set up the stored procedure by typing:
+
----
CALL add_bonus_by_emp_no(:empno,500);
----
+
image:database-connector-examples-fe6e9.png[]
+
. Go to `http://localhost:8081/getemps?emp=1065` in a client browser or using curl.
+
The employee ID is passed as an input parameter and ingested by the application.

== See Also

* link:/mule-user-guide/v/3.8/batch-processing[batch processing]
* link:/mule-user-guide/v/3.8/poll-reference[poll scope]